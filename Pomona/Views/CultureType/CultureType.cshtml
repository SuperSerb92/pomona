@{
    Layout = null;
}

@{ await Html.RenderPartialAsync("PopupMessage"); }

@using (Html.BeginForm())
{
    @(Html.DevExtreme().DataGrid<Pomona.Models.CultureType>()
                                          .ID("cultureTypeGrid")
                                          .ShowBorders(true)
                                           .ElementAttr("overflow", "auto")
                                          .ShowColumnHeaders(true)
                                          // .AllowColumnResizing(true)
                                          .ColumnMinWidth(50)
                                          .ColumnResizingMode(ColumnResizingMode.Widget)
                                          .DataSource(d => d.Mvc().Controller("CultureType")
                                          .LoadAction("GetCultureTypes")
                                          .InsertAction("InsertCultureType")
                                          .UpdateAction("UpdateCultureType")
                                          .DeleteAction("DeleteCultureType")
                                          .Key("CultureTypeId"))
                                          .Columns(columns =>
                                          {
                                           
                                              columns.AddFor(u => u.CultureTypeName).Option("required", true).Caption("Sorta voća");

                                              columns.AddFor(m => m.CultureId).Caption("Vrsta voća")
                                               .MinWidth(600)
                                              .Lookup(lookup => lookup
                                                  .DataSource(d => d.Mvc().Controller("Culture").LoadAction("GetCulturesStaticList").Key("CultureId"))
                                                  .DisplayExpr("CultureName")
                                                  .ValueExpr("CultureId"));
                                          })
                                          .Editing(editing =>
                                          {
                                              editing.Mode(GridEditMode.Row);
                                              editing.AllowAdding(true);
                                              editing.AllowDeleting(true);
                                              editing.AllowUpdating(true);
                                          })
                                         .Paging(p => p.PageSize(13))
                                         .FilterRow(f => f.Visible(true))
                                         .HeaderFilter(f => f.Visible(true))
                                         .FocusedRowEnabled(true)
                                        .OnRowInserting("onRowInsertingCultureTypes")
                                        .OnRowUpdating("onRowUpdatingCultureTypes")
                                         // .OnFocusedRowChanged("OnFocusedRowChangedCultureTypes")
                                         // .OnEditorPreparing("onCultureTypesGridEditorPreparing")
                                         )
}